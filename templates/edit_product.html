<!-- templates/edit_product.html -->
{% extends "base.html" %}

{% block title %}Edit Product - E-commerce{% endblock %}

{% block content %}
    <div class="container mt-5">
        <h1>Edit Product</h1>
        <form method="POST" action="{{ url_for('main.edit_product', product_id=product.id) }}" enctype="multipart/form-data">
            {{ form.hidden_tag() }}
            <div class="mb-3">
                {{ form.name.label(for="name") }}
                {{ form.name(id="name", class_="form-control") }}
                {% for error in form.name.errors %}
                    <div class="text-danger">{{ error }}</div>
                {% endfor %}
            </div>
            <div class="mb-3">
                {{ form.description.label(for="description") }}
                {{ form.description(id="description", class_="form-control") }}
                {% for error in form.description.errors %}
                    <div class="text-danger">{{ error }}</div>
                {% endfor %}
            </div>
            <div class="mb-3">
                {{ form.price.label(for="price") }}
                {{ form.price(id="price", class_="form-control") }}
                {% for error in form.price.errors %}
                    <div class="text-danger">{{ error }}</div>
                {% endfor %}
            </div>
            <div class="mb-3">
                {{ form.quantity.label(for="quantity") }}
                {{ form.quantity(id="quantity", class_="form-control") }}
                {% for error in form.quantity.errors %}
                    <div class="text-danger">{{ error }}</div>
                {% endfor %}
            </div>
            <div class="mb-3">
                {{ form.brand_id.label(for="brand_id") }}
                <input type="text" id="brand_id" name="brand_id" class="form-control" value="{{ form.brand_id.data }}">
                {% for error in form.brand_id.errors %}
                    <div class="text-danger">{{ error }}</div>
                {% endfor %}
            </div>
            <div class="mb-3">
                {{ form.category_id.label(for="category_id") }}
                <input type="text" id="category_id" name="category_id" class="form-control" value="{{ form.category_id.data }}">
                {% for error in form.category_id.errors %}
                    <div class="text-danger">{{ error }}</div>
                {% endfor %}
            </div>
            <div class="mb-3">
                <label for="image" class="form-label">Product Image</label>
                {{ form.image(id="image", class_="form-control") }}
            </div>
            <button type="submit" class="btn btn-primary">{{ form.submit.label }}</button>
        </form>
    </div>
{% endblock %}

{% block scripts %}
    <script>
        function previewImage(input) {
            var file = input.files[0];
            var reader = new FileReader();
            reader.onload = function(e) {
                document.getElementById('image-preview').src = e.target.result;
            }
            reader.readAsDataURL(file);
        }
    </script>
{% endblock %}